{"ast":null,"code":"var _jsxFileName = \"/home/luis/molly_project/frontend/src/pages/Dashboard/ChatPage.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\n\n// --- Iconos de Lucide React ---\nimport { Menu, Bot, Settings, Globe, BarChart3, Shield, Briefcase, FileText, Layers, Bell, Terminal, Zap, LogOut, Send, Loader2 } from 'lucide-react';\n\n// Constantes de configuración (Ajusta la URL de tu backend Flask si es necesario)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://127.0.0.1:5000/api';\n\n// --- 1. Definición del Menú de Navegación ---\nconst menuItems = [{\n  name: 'IA',\n  icon: Bot,\n  path: 'ia'\n}, {\n  name: 'Automatizaciones',\n  icon: Terminal,\n  path: 'automatizations'\n}, {\n  name: 'OSINT',\n  icon: Globe,\n  path: 'osint'\n}, {\n  name: 'Dashboard',\n  icon: BarChart3,\n  path: 'dashboard'\n}, {\n  name: 'Vulnerabilidades',\n  icon: Shield,\n  path: 'vulnerabilities'\n}, {\n  name: 'Activos',\n  icon: Briefcase,\n  path: 'assets'\n}, {\n  name: 'Reportes',\n  icon: FileText,\n  path: 'reports'\n}, {\n  name: 'Informes',\n  icon: Layers,\n  path: 'summaries'\n},\n// Distinto de Reportes\n{\n  name: 'Monitorización',\n  icon: Zap,\n  path: 'monitoring'\n}, {\n  name: 'Notificaciones',\n  icon: Bell,\n  path: 'notifications'\n}, {\n  name: 'Configuración',\n  icon: Settings,\n  path: 'settings'\n}];\n\n// --- 2. Componente de Chat (Área Principal) ---\nconst ChatPanel = ({\n  sendMessage,\n  messages,\n  isSending\n}) => {\n  _s();\n  const [inputMessage, setInputMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (inputMessage.trim() && !isSending) {\n      sendMessage(inputMessage.trim());\n      setInputMessage('');\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(scrollToBottom, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow overflow-y-auto space-y-4 pr-2\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-3xl p-3 rounded-xl shadow-lg transition-all duration-300 ${msg.sender === 'user' ? 'bg-indigo-600 text-white rounded-br-none' : 'bg-gray-700 text-gray-100 rounded-tl-none'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-xs mb-1 opacity-70\",\n            children: msg.sender === 'user' ? 'Tú' : 'Molly'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"whitespace-pre-wrap\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)), isSending && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-xs p-3 rounded-xl bg-gray-700 text-gray-100 rounded-tl-none flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"w-4 h-4 animate-spin text-indigo-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Molly est\\xE1 escribiendo...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"mt-4 flex items-center p-3 bg-gray-800 rounded-xl shadow-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: inputMessage,\n        onChange: e => setInputMessage(e.target.value),\n        placeholder: \"Escribe tu mensaje aqu\\xED...\",\n        className: \"flex-grow bg-transparent text-gray-200 placeholder-gray-400 focus:outline-none text-base\",\n        disabled: isSending\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !inputMessage.trim() || isSending,\n        className: `ml-3 p-3 rounded-full transition-all duration-200 ${!inputMessage.trim() || isSending ? 'bg-gray-600 text-gray-400 cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-500 shadow-md hover:shadow-lg'}`,\n        children: isSending ? /*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"w-5 h-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 24\n        }, this) : /*#__PURE__*/_jsxDEV(Send, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 71\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n// --- 3. Componente Principal (Dashboard Layout) ---\n_s(ChatPanel, \"9KREkdI0YzIJ1Ot4XwJhWgGhtwo=\");\n_c = ChatPanel;\nconst App = () => {\n  _s2();\n  // Estado para la navegación lateral: IA por defecto.\n  const [activeSection, setActiveSection] = useState('ia');\n  // Estado para el sidebar colapsado/expandido\n  const [isSidebarExpanded, setIsSidebarExpanded] = useState(true);\n  // Estado de la sesión de chat (mensajes)\n  const [messages, setMessages] = useState([{\n    sender: 'molly',\n    text: '¡Hola! Soy Molly, tu asistente de ciberseguridad. ¿En qué puedo ayudarte hoy?'\n  }]);\n  // Estado de la API\n  const [isSending, setIsSending] = useState(false);\n  const [chatSessionId, setChatSessionId] = useState(null); // ID de sesión para el backend\n\n  // --- Lógica de Comunicación con la API ---\n  const sendMessage = useCallback(async query => {\n    // 1. Añadir mensaje de usuario localmente\n    const userMessage = {\n      sender: 'user',\n      text: query\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setIsSending(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        // Enviar la consulta y el ID de sesión\n        body: JSON.stringify({\n          query: query,\n          chat_session_id: chatSessionId\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        // 2. Añadir respuesta de Molly\n        const mollyResponse = {\n          sender: 'molly',\n          text: data.response.response || \"No recibí una respuesta de la IA. Revisa el log del backend.\"\n        };\n        setMessages(prev => [...prev, mollyResponse]);\n\n        // 3. Actualizar el ID de sesión si el backend lo devuelve (opcional, pero buena práctica)\n        if (data.session_id && data.session_id !== chatSessionId) {\n          setChatSessionId(data.session_id);\n        }\n      } else {\n        // Manejar errores del servidor\n        const errorMessage = data.error || `Error ${response.status}: ${data.details || 'Fallo desconocido'}`;\n        const errorResponse = {\n          sender: 'molly',\n          text: `ERROR: ${errorMessage}`\n        };\n        setMessages(prev => [...prev, errorResponse]);\n      }\n    } catch (error) {\n      console.error(\"Fallo al comunicarse con el backend:\", error);\n      const errorResponse = {\n        sender: 'molly',\n        text: `ERROR de conexión: No se pudo contactar al servidor en ${API_BASE_URL}. Asegúrate de que Flask esté corriendo.`\n      };\n      setMessages(prev => [...prev, errorResponse]);\n    } finally {\n      setIsSending(false);\n    }\n  }, [chatSessionId]);\n\n  // Función para obtener el título de la sección actual\n  const getSectionTitle = () => {\n    const section = menuItems.find(item => item.path === activeSection);\n    return section ? section.name : 'Molly Dashboard';\n  };\n\n  // Función de renderizado para el Área de Contenido Principal\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'ia':\n        return /*#__PURE__*/_jsxDEV(ChatPanel, {\n          sendMessage: sendMessage,\n          messages: messages,\n          isSending: isSending\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 16\n        }, this);\n      case 'dashboard':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8 text-white\",\n          children: \"Dashboard - Aqu\\xED ir\\xE1n gr\\xE1ficos y estad\\xEDsticas.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 16\n        }, this);\n      case 'reports':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8 text-white\",\n          children: \"Reportes - Escaneos individuales por Host.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 16\n        }, this);\n      case 'vulnerabilities':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8 text-white\",\n          children: \"Vulnerabilidades - Detalle t\\xE9cnico y clasificaci\\xF3n.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 16\n        }, this);\n      // Añadir más casos según el requerimiento (Activos, Informes, etc.)\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8 text-white\",\n          children: [\"M\\xF3dulo: \", getSectionTitle(), \" (En Construcci\\xF3n)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // --- Renderizado del Layout General ---\n  return (\n    /*#__PURE__*/\n    // Contenedor principal del dashboard (Flexbox para sidebar y contenido)\n    _jsxDEV(\"div\", {\n      className: \"flex h-screen bg-gray-900 text-white font-sans\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: `flex flex-col bg-gray-800 transition-all duration-300 ease-in-out ${isSidebarExpanded ? 'w-64' : 'w-20'} p-4 shadow-2xl`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center mb-8 h-8 ${isSidebarExpanded ? 'justify-between' : 'justify-center'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-2xl font-bold text-indigo-400 ${!isSidebarExpanded && 'hidden'}`,\n            children: \"MOLLY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsSidebarExpanded(!isSidebarExpanded),\n            className: \"p-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition-colors\",\n            \"aria-label\": \"Toggle Menu\",\n            children: /*#__PURE__*/_jsxDEV(Menu, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"flex-grow space-y-2\",\n          children: menuItems.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveSection(item.path),\n            className: `flex items-center w-full p-3 rounded-xl transition-all duration-200 ${isSidebarExpanded ? 'justify-start' : 'justify-center'} ${activeSection === item.path ? 'bg-indigo-600 text-white shadow-indigo-500/50 shadow-md' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`,\n            children: [/*#__PURE__*/_jsxDEV(item.icon, {\n              className: `w-5 h-5 ${isSidebarExpanded && 'mr-3'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `text-sm font-medium ${!isSidebarExpanded && 'hidden'}`,\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, item.path, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 pt-4 border-t border-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => alert(\"Simulando cierre de sesión...\") // Simulación de Login para el requisito 1\n            ,\n            className: `flex items-center w-full p-3 rounded-xl transition-all duration-200 ${isSidebarExpanded ? 'justify-start' : 'justify-center'} text-red-400 hover:bg-gray-700 hover:text-red-300`,\n            children: [/*#__PURE__*/_jsxDEV(LogOut, {\n              className: `w-5 h-5 ${isSidebarExpanded && 'mr-3'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `text-sm font-medium ${!isSidebarExpanded && 'hidden'}`,\n              children: \"Cerrar Sesi\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-grow flex flex-col overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"flex items-center justify-between p-4 bg-gray-800 shadow-xl border-b border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-semibold text-white\",\n            children: getSectionTitle()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-gray-700\",\n              children: /*#__PURE__*/_jsxDEV(Settings, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-sm font-medium\",\n              children: \"L\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"flex-grow overflow-auto bg-gray-900\",\n          children: renderContent()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s2(App, \"n3yDej1oMbyBa/IgEmn9o1jvfEY=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChatPanel\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Menu","Bot","Settings","Globe","BarChart3","Shield","Briefcase","FileText","Layers","Bell","Terminal","Zap","LogOut","Send","Loader2","jsxDEV","_jsxDEV","API_BASE_URL","menuItems","name","icon","path","ChatPanel","sendMessage","messages","isSending","_s","inputMessage","setInputMessage","messagesEndRef","handleSubmit","e","preventDefault","trim","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","className","children","map","msg","index","sender","fileName","_jsxFileName","lineNumber","columnNumber","text","ref","onSubmit","type","value","onChange","target","placeholder","disabled","_c","App","_s2","activeSection","setActiveSection","isSidebarExpanded","setIsSidebarExpanded","setMessages","setIsSending","chatSessionId","setChatSessionId","query","userMessage","prev","response","fetch","method","headers","body","JSON","stringify","chat_session_id","data","json","ok","mollyResponse","session_id","errorMessage","error","status","details","errorResponse","console","getSectionTitle","section","find","item","renderContent","onClick","alert","_c2","$RefreshReg$"],"sources":["/home/luis/molly_project/frontend/src/pages/Dashboard/ChatPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\n\n// --- Iconos de Lucide React ---\nimport { \n  Menu, Bot, Settings, Globe, BarChart3, Shield, Briefcase, FileText, \n  Layers, Bell, Terminal, Zap, LogOut,\n  Send, Loader2 \n} from 'lucide-react';\n\n// Constantes de configuración (Ajusta la URL de tu backend Flask si es necesario)\nconst API_BASE_URL = 'http://127.0.0.1:5000/api';\n\n// --- 1. Definición del Menú de Navegación ---\nconst menuItems = [\n  { name: 'IA', icon: Bot, path: 'ia' },\n  { name: 'Automatizaciones', icon: Terminal, path: 'automatizations' },\n  { name: 'OSINT', icon: Globe, path: 'osint' },\n  { name: 'Dashboard', icon: BarChart3, path: 'dashboard' },\n  { name: 'Vulnerabilidades', icon: Shield, path: 'vulnerabilities' },\n  { name: 'Activos', icon: Briefcase, path: 'assets' },\n  { name: 'Reportes', icon: FileText, path: 'reports' },\n  { name: 'Informes', icon: Layers, path: 'summaries' }, // Distinto de Reportes\n  { name: 'Monitorización', icon: Zap, path: 'monitoring' },\n  { name: 'Notificaciones', icon: Bell, path: 'notifications' },\n  { name: 'Configuración', icon: Settings, path: 'settings' },\n];\n\n// --- 2. Componente de Chat (Área Principal) ---\nconst ChatPanel = ({ sendMessage, messages, isSending }) => {\n  const [inputMessage, setInputMessage] = useState('');\n  const messagesEndRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (inputMessage.trim() && !isSending) {\n      sendMessage(inputMessage.trim());\n      setInputMessage('');\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(scrollToBottom, [messages]);\n\n  return (\n    <div className=\"flex flex-col h-full p-4\">\n      {/* Contenedor de Mensajes */}\n      <div className=\"flex-grow overflow-y-auto space-y-4 pr-2\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n            <div \n              className={`max-w-3xl p-3 rounded-xl shadow-lg transition-all duration-300 ${\n                msg.sender === 'user' \n                  ? 'bg-indigo-600 text-white rounded-br-none' \n                  : 'bg-gray-700 text-gray-100 rounded-tl-none'\n              }`}\n            >\n              {/* Título de la burbuja */}\n              <div className=\"font-semibold text-xs mb-1 opacity-70\">\n                {msg.sender === 'user' ? 'Tú' : 'Molly'}\n              </div>\n              {/* Contenido del mensaje. Manejamos saltos de línea y Markdown básico si fuera necesario */}\n              <p className=\"whitespace-pre-wrap\">{msg.text}</p>\n            </div>\n          </div>\n        ))}\n        {/* Indicador de \"escribiendo\" de Molly */}\n        {isSending && (\n          <div className=\"flex justify-start\">\n            <div className=\"max-w-xs p-3 rounded-xl bg-gray-700 text-gray-100 rounded-tl-none flex items-center space-x-2\">\n              <Loader2 className=\"w-4 h-4 animate-spin text-indigo-400\" />\n              <span>Molly está escribiendo...</span>\n            </div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Campo de Texto Inferior */}\n      <form onSubmit={handleSubmit} className=\"mt-4 flex items-center p-3 bg-gray-800 rounded-xl shadow-inner\">\n        <input\n          type=\"text\"\n          value={inputMessage}\n          onChange={(e) => setInputMessage(e.target.value)}\n          placeholder=\"Escribe tu mensaje aquí...\"\n          className=\"flex-grow bg-transparent text-gray-200 placeholder-gray-400 focus:outline-none text-base\"\n          disabled={isSending}\n        />\n        <button\n          type=\"submit\"\n          disabled={!inputMessage.trim() || isSending}\n          className={`ml-3 p-3 rounded-full transition-all duration-200 ${\n            !inputMessage.trim() || isSending\n              ? 'bg-gray-600 text-gray-400 cursor-not-allowed'\n              : 'bg-indigo-600 text-white hover:bg-indigo-500 shadow-md hover:shadow-lg'\n          }`}\n        >\n          {isSending ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Send className=\"w-5 h-5\" />}\n        </button>\n      </form>\n    </div>\n  );\n};\n\n// --- 3. Componente Principal (Dashboard Layout) ---\nconst App = () => {\n  // Estado para la navegación lateral: IA por defecto.\n  const [activeSection, setActiveSection] = useState('ia');\n  // Estado para el sidebar colapsado/expandido\n  const [isSidebarExpanded, setIsSidebarExpanded] = useState(true);\n  // Estado de la sesión de chat (mensajes)\n  const [messages, setMessages] = useState([\n    { sender: 'molly', text: '¡Hola! Soy Molly, tu asistente de ciberseguridad. ¿En qué puedo ayudarte hoy?' },\n  ]);\n  // Estado de la API\n  const [isSending, setIsSending] = useState(false);\n  const [chatSessionId, setChatSessionId] = useState(null); // ID de sesión para el backend\n\n  // --- Lógica de Comunicación con la API ---\n  const sendMessage = useCallback(async (query) => {\n    // 1. Añadir mensaje de usuario localmente\n    const userMessage = { sender: 'user', text: query };\n    setMessages(prev => [...prev, userMessage]);\n    setIsSending(true);\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        // Enviar la consulta y el ID de sesión\n        body: JSON.stringify({ query: query, chat_session_id: chatSessionId }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // 2. Añadir respuesta de Molly\n        const mollyResponse = { sender: 'molly', text: data.response.response || \"No recibí una respuesta de la IA. Revisa el log del backend.\" };\n        setMessages(prev => [...prev, mollyResponse]);\n        \n        // 3. Actualizar el ID de sesión si el backend lo devuelve (opcional, pero buena práctica)\n        if (data.session_id && data.session_id !== chatSessionId) {\n            setChatSessionId(data.session_id);\n        }\n\n      } else {\n        // Manejar errores del servidor\n        const errorMessage = data.error || `Error ${response.status}: ${data.details || 'Fallo desconocido'}`;\n        const errorResponse = { sender: 'molly', text: `ERROR: ${errorMessage}` };\n        setMessages(prev => [...prev, errorResponse]);\n      }\n    } catch (error) {\n      console.error(\"Fallo al comunicarse con el backend:\", error);\n      const errorResponse = { sender: 'molly', text: `ERROR de conexión: No se pudo contactar al servidor en ${API_BASE_URL}. Asegúrate de que Flask esté corriendo.` };\n      setMessages(prev => [...prev, errorResponse]);\n    } finally {\n      setIsSending(false);\n    }\n  }, [chatSessionId]);\n\n  // Función para obtener el título de la sección actual\n  const getSectionTitle = () => {\n    const section = menuItems.find(item => item.path === activeSection);\n    return section ? section.name : 'Molly Dashboard';\n  };\n  \n  // Función de renderizado para el Área de Contenido Principal\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'ia':\n        return <ChatPanel sendMessage={sendMessage} messages={messages} isSending={isSending} />;\n      case 'dashboard':\n        return <div className=\"p-8 text-white\">Dashboard - Aquí irán gráficos y estadísticas.</div>;\n      case 'reports':\n        return <div className=\"p-8 text-white\">Reportes - Escaneos individuales por Host.</div>;\n      case 'vulnerabilities':\n        return <div className=\"p-8 text-white\">Vulnerabilidades - Detalle técnico y clasificación.</div>;\n      // Añadir más casos según el requerimiento (Activos, Informes, etc.)\n      default:\n        return <div className=\"p-8 text-white\">Módulo: {getSectionTitle()} (En Construcción)</div>;\n    }\n  };\n\n\n  // --- Renderizado del Layout General ---\n  return (\n    // Contenedor principal del dashboard (Flexbox para sidebar y contenido)\n    <div className=\"flex h-screen bg-gray-900 text-white font-sans\">\n      \n      {/* 1. Sidebar o Barra Lateral Izquierda */}\n      <aside \n        className={`flex flex-col bg-gray-800 transition-all duration-300 ease-in-out ${\n          isSidebarExpanded ? 'w-64' : 'w-20'\n        } p-4 shadow-2xl`}\n      >\n        {/* Cabecera del Sidebar (Logo y Botón Menú) */}\n        <div className={`flex items-center mb-8 h-8 ${isSidebarExpanded ? 'justify-between' : 'justify-center'}`}>\n          <div className={`text-2xl font-bold text-indigo-400 ${!isSidebarExpanded && 'hidden'}`}>\n            MOLLY\n          </div>\n          <button \n            onClick={() => setIsSidebarExpanded(!isSidebarExpanded)}\n            className=\"p-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition-colors\"\n            aria-label=\"Toggle Menu\"\n          >\n            <Menu className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Elementos de Navegación */}\n        <nav className=\"flex-grow space-y-2\">\n          {menuItems.map((item) => (\n            <button\n              key={item.path}\n              onClick={() => setActiveSection(item.path)}\n              className={`flex items-center w-full p-3 rounded-xl transition-all duration-200 ${\n                isSidebarExpanded ? 'justify-start' : 'justify-center'\n              } ${\n                activeSection === item.path\n                  ? 'bg-indigo-600 text-white shadow-indigo-500/50 shadow-md'\n                  : 'text-gray-300 hover:bg-gray-700 hover:text-white'\n              }`}\n            >\n              <item.icon className={`w-5 h-5 ${isSidebarExpanded && 'mr-3'}`} />\n              <span className={`text-sm font-medium ${!isSidebarExpanded && 'hidden'}`}>\n                {item.name}\n              </span>\n            </button>\n          ))}\n        </nav>\n\n        {/* Pie de página del Sidebar (Logout) */}\n        <div className=\"mt-8 pt-4 border-t border-gray-700\">\n             <button\n                onClick={() => alert(\"Simulando cierre de sesión...\")} // Simulación de Login para el requisito 1\n                className={`flex items-center w-full p-3 rounded-xl transition-all duration-200 ${\n                    isSidebarExpanded ? 'justify-start' : 'justify-center'\n                } text-red-400 hover:bg-gray-700 hover:text-red-300`}\n             >\n                <LogOut className={`w-5 h-5 ${isSidebarExpanded && 'mr-3'}`} />\n                <span className={`text-sm font-medium ${!isSidebarExpanded && 'hidden'}`}>\n                    Cerrar Sesión\n                </span>\n             </button>\n        </div>\n\n      </aside>\n\n      {/* Área de Contenido Principal (Header + Contenido Dinámico) */}\n      <main className=\"flex-grow flex flex-col overflow-hidden\">\n        \n        {/* 2. Barra Superior (Header) */}\n        <header className=\"flex items-center justify-between p-4 bg-gray-800 shadow-xl border-b border-gray-700\">\n          <h1 className=\"text-2xl font-semibold text-white\">\n            {getSectionTitle()}\n          </h1>\n          {/* Opcional: Iconos de perfil, ajustes (simulación) */}\n          <div className=\"flex items-center space-x-4\">\n            <button className=\"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-gray-700\">\n              <Settings className=\"w-5 h-5\" />\n            </button>\n            <div className=\"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-sm font-medium\">\n                L\n            </div>\n          </div>\n        </header>\n\n        {/* 3. Área de Contenido Dinámico */}\n        <section className=\"flex-grow overflow-auto bg-gray-900\">\n          {renderContent()}\n        </section>\n\n      </main>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}