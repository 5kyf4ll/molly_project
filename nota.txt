codigo de como deberia quedar el dashboard:
import React, { useState, useEffect, useCallback, useRef } from 'react';

// --- Iconos de Lucide React ---
import { 
  Menu, Bot, Settings, Globe, BarChart3, Shield, Briefcase, FileText, 
  Layers, Bell, Terminal, Zap, LogOut,
  Send, Loader2 
} from 'lucide-react';

// Constantes de configuración (Ajusta la URL de tu backend Flask si es necesario)
const API_BASE_URL = 'http://127.0.0.1:5000/api';

// --- 1. Definición del Menú de Navegación ---
const menuItems = [
  { name: 'IA', icon: Bot, path: 'ia' },
  { name: 'Automatizaciones', icon: Terminal, path: 'automatizations' },
  { name: 'OSINT', icon: Globe, path: 'osint' },
  { name: 'Dashboard', icon: BarChart3, path: 'dashboard' },
  { name: 'Vulnerabilidades', icon: Shield, path: 'vulnerabilities' },
  { name: 'Activos', icon: Briefcase, path: 'assets' },
  { name: 'Reportes', icon: FileText, path: 'reports' },
  { name: 'Informes', icon: Layers, path: 'summaries' }, // Distinto de Reportes
  { name: 'Monitorización', icon: Zap, path: 'monitoring' },
  { name: 'Notificaciones', icon: Bell, path: 'notifications' },
  { name: 'Configuración', icon: Settings, path: 'settings' },
];

// --- 2. Componente de Chat (Área Principal) ---
const ChatPanel = ({ sendMessage, messages, isSending }) => {
  const [inputMessage, setInputMessage] = useState('');
  const messagesEndRef = useRef(null);

  const handleSubmit = (e) => {
    e.preventDefault();
    if (inputMessage.trim() && !isSending) {
      sendMessage(inputMessage.trim());
      setInputMessage('');
    }
  };

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(scrollToBottom, [messages]);

  return (
    <div className="flex flex-col h-full p-4">
      {/* Contenedor de Mensajes */}
      <div className="flex-grow overflow-y-auto space-y-4 pr-2">
        {messages.map((msg, index) => (
          <div key={index} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
            <div 
              className={`max-w-3xl p-3 rounded-xl shadow-lg transition-all duration-300 ${
                msg.sender === 'user' 
                  ? 'bg-indigo-600 text-white rounded-br-none' 
                  : 'bg-gray-700 text-gray-100 rounded-tl-none'
              }`}
            >
              {/* Título de la burbuja */}
              <div className="font-semibold text-xs mb-1 opacity-70">
                {msg.sender === 'user' ? 'Tú' : 'Molly'}
              </div>
              {/* Contenido del mensaje. Manejamos saltos de línea y Markdown básico si fuera necesario */}
              <p className="whitespace-pre-wrap">{msg.text}</p>
            </div>
          </div>
        ))}
        {/* Indicador de "escribiendo" de Molly */}
        {isSending && (
          <div className="flex justify-start">
            <div className="max-w-xs p-3 rounded-xl bg-gray-700 text-gray-100 rounded-tl-none flex items-center space-x-2">
              <Loader2 className="w-4 h-4 animate-spin text-indigo-400" />
              <span>Molly está escribiendo...</span>
            </div>
          </div>
        )}
        <div ref={messagesEndRef} />
      </div>

      {/* Campo de Texto Inferior */}
      <form onSubmit={handleSubmit} className="mt-4 flex items-center p-3 bg-gray-800 rounded-xl shadow-inner">
        <input
          type="text"
          value={inputMessage}
          onChange={(e) => setInputMessage(e.target.value)}
          placeholder="Escribe tu mensaje aquí..."
          className="flex-grow bg-transparent text-gray-200 placeholder-gray-400 focus:outline-none text-base"
          disabled={isSending}
        />
        <button
          type="submit"
          disabled={!inputMessage.trim() || isSending}
          className={`ml-3 p-3 rounded-full transition-all duration-200 ${
            !inputMessage.trim() || isSending
              ? 'bg-gray-600 text-gray-400 cursor-not-allowed'
              : 'bg-indigo-600 text-white hover:bg-indigo-500 shadow-md hover:shadow-lg'
          }`}
        >
          {isSending ? <Loader2 className="w-5 h-5 animate-spin" /> : <Send className="w-5 h-5" />}
        </button>
      </form>
    </div>
  );
};

// --- 3. Componente Principal (Dashboard Layout) ---
const App = () => {
  // Estado para la navegación lateral: IA por defecto.
  const [activeSection, setActiveSection] = useState('ia');
  // Estado para el sidebar colapsado/expandido
  const [isSidebarExpanded, setIsSidebarExpanded] = useState(true);
  // Estado de la sesión de chat (mensajes)
  const [messages, setMessages] = useState([
    { sender: 'molly', text: '¡Hola! Soy Molly, tu asistente de ciberseguridad. ¿En qué puedo ayudarte hoy?' },
  ]);
  // Estado de la API
  const [isSending, setIsSending] = useState(false);
  const [chatSessionId, setChatSessionId] = useState(null); // ID de sesión para el backend

  // --- Lógica de Comunicación con la API ---
  const sendMessage = useCallback(async (query) => {
    // 1. Añadir mensaje de usuario localmente
    const userMessage = { sender: 'user', text: query };
    setMessages(prev => [...prev, userMessage]);
    setIsSending(true);

    try {
      const response = await fetch(`${API_BASE_URL}/chat`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        // Enviar la consulta y el ID de sesión
        body: JSON.stringify({ query: query, chat_session_id: chatSessionId }),
      });

      const data = await response.json();

      if (response.ok) {
        // 2. Añadir respuesta de Molly
        const mollyResponse = { sender: 'molly', text: data.response.response || "No recibí una respuesta de la IA. Revisa el log del backend." };
        setMessages(prev => [...prev, mollyResponse]);
        
        // 3. Actualizar el ID de sesión si el backend lo devuelve (opcional, pero buena práctica)
        if (data.session_id && data.session_id !== chatSessionId) {
            setChatSessionId(data.session_id);
        }

      } else {
        // Manejar errores del servidor
        const errorMessage = data.error || `Error ${response.status}: ${data.details || 'Fallo desconocido'}`;
        const errorResponse = { sender: 'molly', text: `ERROR: ${errorMessage}` };
        setMessages(prev => [...prev, errorResponse]);
      }
    } catch (error) {
      console.error("Fallo al comunicarse con el backend:", error);
      const errorResponse = { sender: 'molly', text: `ERROR de conexión: No se pudo contactar al servidor en ${API_BASE_URL}. Asegúrate de que Flask esté corriendo.` };
      setMessages(prev => [...prev, errorResponse]);
    } finally {
      setIsSending(false);
    }
  }, [chatSessionId]);

  // Función para obtener el título de la sección actual
  const getSectionTitle = () => {
    const section = menuItems.find(item => item.path === activeSection);
    return section ? section.name : 'Molly Dashboard';
  };
  
  // Función de renderizado para el Área de Contenido Principal
  const renderContent = () => {
    switch (activeSection) {
      case 'ia':
        return <ChatPanel sendMessage={sendMessage} messages={messages} isSending={isSending} />;
      case 'dashboard':
        return <div className="p-8 text-white">Dashboard - Aquí irán gráficos y estadísticas.</div>;
      case 'reports':
        return <div className="p-8 text-white">Reportes - Escaneos individuales por Host.</div>;
      case 'vulnerabilities':
        return <div className="p-8 text-white">Vulnerabilidades - Detalle técnico y clasificación.</div>;
      // Añadir más casos según el requerimiento (Activos, Informes, etc.)
      default:
        return <div className="p-8 text-white">Módulo: {getSectionTitle()} (En Construcción)</div>;
    }
  };


  // --- Renderizado del Layout General ---
  return (
    // Contenedor principal del dashboard (Flexbox para sidebar y contenido)
    <div className="flex h-screen bg-gray-900 text-white font-sans">
      
      {/* 1. Sidebar o Barra Lateral Izquierda */}
      <aside 
        className={`flex flex-col bg-gray-800 transition-all duration-300 ease-in-out ${
          isSidebarExpanded ? 'w-64' : 'w-20'
        } p-4 shadow-2xl`}
      >
        {/* Cabecera del Sidebar (Logo y Botón Menú) */}
        <div className={`flex items-center mb-8 h-8 ${isSidebarExpanded ? 'justify-between' : 'justify-center'}`}>
          <div className={`text-2xl font-bold text-indigo-400 ${!isSidebarExpanded && 'hidden'}`}>
            MOLLY
          </div>
          <button 
            onClick={() => setIsSidebarExpanded(!isSidebarExpanded)}
            className="p-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition-colors"
            aria-label="Toggle Menu"
          >
            <Menu className="w-6 h-6" />
          </button>
        </div>

        {/* Elementos de Navegación */}
        <nav className="flex-grow space-y-2">
          {menuItems.map((item) => (
            <button
              key={item.path}
              onClick={() => setActiveSection(item.path)}
              className={`flex items-center w-full p-3 rounded-xl transition-all duration-200 ${
                isSidebarExpanded ? 'justify-start' : 'justify-center'
              } ${
                activeSection === item.path
                  ? 'bg-indigo-600 text-white shadow-indigo-500/50 shadow-md'
                  : 'text-gray-300 hover:bg-gray-700 hover:text-white'
              }`}
            >
              <item.icon className={`w-5 h-5 ${isSidebarExpanded && 'mr-3'}`} />
              <span className={`text-sm font-medium ${!isSidebarExpanded && 'hidden'}`}>
                {item.name}
              </span>
            </button>
          ))}
        </nav>

        {/* Pie de página del Sidebar (Logout) */}
        <div className="mt-8 pt-4 border-t border-gray-700">
             <button
                onClick={() => alert("Simulando cierre de sesión...")} // Simulación de Login para el requisito 1
                className={`flex items-center w-full p-3 rounded-xl transition-all duration-200 ${
                    isSidebarExpanded ? 'justify-start' : 'justify-center'
                } text-red-400 hover:bg-gray-700 hover:text-red-300`}
             >
                <LogOut className={`w-5 h-5 ${isSidebarExpanded && 'mr-3'}`} />
                <span className={`text-sm font-medium ${!isSidebarExpanded && 'hidden'}`}>
                    Cerrar Sesión
                </span>
             </button>
        </div>

      </aside>

      {/* Área de Contenido Principal (Header + Contenido Dinámico) */}
      <main className="flex-grow flex flex-col overflow-hidden">
        
        {/* 2. Barra Superior (Header) */}
        <header className="flex items-center justify-between p-4 bg-gray-800 shadow-xl border-b border-gray-700">
          <h1 className="text-2xl font-semibold text-white">
            {getSectionTitle()}
          </h1>
          {/* Opcional: Iconos de perfil, ajustes (simulación) */}
          <div className="flex items-center space-x-4">
            <button className="text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-gray-700">
              <Settings className="w-5 h-5" />
            </button>
            <div className="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-sm font-medium">
                L
            </div>
          </div>
        </header>

        {/* 3. Área de Contenido Dinámico */}
        <section className="flex-grow overflow-auto bg-gray-900">
          {renderContent()}
        </section>

      </main>
    </div>
  );
};

export default App;